{% extends 'base.html.twig' %}
{% form_theme formLogin 'bootstrap_4_layout.html.twig' %}
{% block title %}Connexion{% endblock %}

{% block stylesheets %}
{{ parent() }}

<link rel="stylesheet" href="{{ asset('css/login.css') }}">
{% endblock %}


{% block body %}


{% for message in app.flashes('message') %}
        {{ message }}
{% endfor %}
{% for message in app.flashes('danger') %}
        {{ message }}
{% endfor %}
{% for message in app.flashes('warning') %}
        {{ message }}
{% endfor %}
{{ form_start(formLogin, {'action': path('app_login'), 'method': 'POST', 'attr': {'class': 'w-100 form-signin', 'id': 'RegistrationType'} }) }}

{% if error %}
<div class="alert alert-danger">{{ error.messageKey | trans(error.messageData, 'security') }}</div>
{% endif %}
{% if app.user %}
<div class="checkbox mb-3">Vous êtes connectée en tant que {{ app.user.firstName }}, <a href="{{ path('app_logout') }}">Déconnexion</a>
{% endif %}

<h1 class="h3 mb-3 font-weight-normal">Connectez-vous</h1>
{#<div class="mb-3">
    {{ form_row(formLogin.email, { 'label': 'Adresse email', 'for': 'username',  'attr': {'class': 'form-control','id': 'username','name': '_username', 'placeholder': 'Adresse email...'  }})
    }}
</div>
{{ form_row(formLogin.password, {'label': 'Mot de passe', 'attr': {'class': 'form-control', 'name': '_password', 'placeholder': 'Mot de passe...'}})
}}
{{ form_widget(formLogin._token,  {'full_name': '_csrf_token'}) }}

<div class="checkbox mb-3">
    <input type="checkbox" id="remember_me" name="_remember_me" checked />
    <label for="remember_me">Se souvenir de moi
    </label>
    <div class="form-group">
        <button type="submit" class="btn btn-warning mt-3 btn-block">Connexion !</button>
    </div>
{#{{ form_row(formLogin_token) }}#}

{#{ form_end(formLogin, {'render_rest': false}) }#}
<label for="inputEmail" class="sr-only">Email</label>
<input type="email" value="{{ last_username }}" name="email" id="inputEmail" class="form-control" placeholder="Email" required autofocus>
    <label for="inputPassword" class="sr-only">Mot de passe</label>
    <input type="password" name="password" id="inputPassword" class="form-control" placeholder="Password" required>

    <input type="hidden" name="_csrf_token"
        value="{{ csrf_token('authenticate') }}"
    >

    {#
        Uncomment this section and add a remember_me option below your firewall to activate remember me functionality.
        See https://symfony.com/doc/current/security/remember_me.html
        <div class="checkbox mb-3">
            <label>
                <input type="checkbox" name="_remember_me"> Remember me
            </label>
        </div>
    #}

    <button class="btn btn-lg btn-primary" type="submit">
        Sign in
    </button>
</form>
{% endblock %}